# -*- coding: utf-8 -*-
"""git_59560_benchmarking_lite_2.11.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/gist/mohantym/6a4c876ddd41f21972ac84da54b982fd/tensorflow-ranking.ipynb

Reference benchmarking notebook -
https://github.com/tensorflow/tensorflow/tree/master/tensorflow/lite/tools/benchmark

Checks the performance of Lite models w.r.to layers and delegates.

```
`# This is formatted as code`
```

# Install Bazel
"""

BAZEL_VERSION = '5.3.0'

!wget https://github.com/bazelbuild/bazel/releases/download/{BAZEL_VERSION}/bazel-{BAZEL_VERSION}-installer-linux-x86_64.sh

#!cd /usr/local/lib/bazel/bin
!chmod +x bazel-{BAZEL_VERSION}-installer-linux-x86_64.sh

!./bazel-{BAZEL_VERSION}-installer-linux-x86_64.sh

#!source /usr/local/lib/bazel/bin/bazel-complete.bash
#!export PATH="$PATH:$HOME/bin:/root/bin"

!bazel

!git clone https://github.com/tensorflow/tensorflow

# Commented out IPython magic to ensure Python compatibility.
# %cd tensorflow

#%cd ..
#%cd tensorflow

#For benchmarking inside android, Make sure tool chain has been supplied - Refer android tool chain notebook
!bazel build -c opt tensorflow/lite/tools/benchmark:benchmark_model

#procured tflite from 2.11

!wget https://www.dropbox.com/s/djfkhh8wppwmrc4/git_59560.tflite

!bazel-bin/tensorflow/lite/tools/benchmark/benchmark_model  --graph=/content/git_59560.tflite  --num_threads=4 use_gpu=True

